<p style="font-family:sans-serif;font-size:14px;font-weight:normal;text-transform:none;margin-top:0;margin-bottom:20px;color:#464951;text-align:left;">
    Payment failed for order <b>$root.ordernum</b> at <a href="<%out.print(shop.getDefaultShopPreferredUrl())%>">$shop.name</a> <br>
    <br>
    Payment details:
</p>

<table style="border-collapse: collapse;" width="100%" cellpadding="3" cellspacing="0">
    <tr>
        <th style="border: 1px solid #E0E0E0;">Transaction</th>
        <th style="border: 1px solid #E0E0E0;">Operation</th>
        <th style="border: 1px solid #E0E0E0;">Result</th>
        <th style="border: 1px solid #E0E0E0;">Amount</th>
        <th style="border: 1px solid #E0E0E0;">Date</th>
    </tr>
    <%
    for (Object payment : payments) {
    %>
    <tr>
        <td style="border: 1px solid #E0E0E0;vertical-align: top">
            <%=payment.transactionGatewayLabel %><br>
            No.<%=payment.orderShipment %><br>
            Shopper ip:<%=payment.shopperIpAddress != null ? payment.shopperIpAddress : "" %>
        </td>
        <td style="border: 1px solid #E0E0E0;vertical-align: top">
            <%=payment.transactionOperation %>
        </td>
        <td style="border: 1px solid #E0E0E0;vertical-align: top">
            <%=payment.paymentProcessorResult %> <%=payment.transactionOperationResultCode != null ? payment.transactionOperationResultCode : "" %><br>
            <%=payment.transactionOperationResultMessage != null ? payment.transactionOperationResultMessage : "" %>
        </td>
        <td style="border: 1px solid #E0E0E0;vertical-align: top">
            <%=payment.paymentAmount %> (<%=payment.orderCurrency %>)
        </td>
        <td style="border: 1px solid #E0E0E0;vertical-align: top">
            <%=org.yes.cart.utils.DateUtils.format(payment.createdTimestamp,'dd-MM-yyyy HH:mm:ss') %>
        </td>
    </tr>
    <% } %>
</table>